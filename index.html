<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ØªØ·Ø¨ÙŠÙ‚ Ø¥Ù‚Ø±Ø£ - Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri+Quran&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #1A2E35;
            --accent-color: #C0A062;
            --background-color: #F4F4F4;
            --surface-color: #FFFFFF;
            --font-color: #0D1B2A;
            --font-color-light: #5A5A5A;
            --border-color: #EAEAEA;
        }
        
        body.dark-mode {
            --primary-color: #1DD1A1;
            --accent-color: #F0D264;
            --background-color: #0D1B2A;
            --surface-color: #1B263B;
            --font-color: #E0E0E0;
            --font-color-light: #B0B0B0;
            --border-color: #415A77;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body { font-family: 'Tajawal', sans-serif; background-color: var(--background-color); color: var(--font-color); -webkit-tap-highlight-color: transparent; }
        
        #app-container { max-width: 1200px; margin: 0 auto; height: 100vh; display: flex; flex-direction: column; background-color: var(--background-color); }
        header { flex-shrink: 0; background-color: var(--primary-color); color: white; padding: 15px 20px; text-align: center; display:flex; justify-content:space-between; align-items:center; box-shadow: 0 2px 10px rgba(0,0,0,0.2); z-index: 1001; }
        main { flex-grow: 1; overflow: hidden; position: relative; }
        
        #bottom-nav { flex-shrink: 0; display: flex; background-color: var(--surface-color); box-shadow: 0 -2px 10px rgba(0,0,0,0.1); border-top: 1px solid var(--border-color); }
        .nav-link { flex-grow: 1; padding: 10px 5px; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; color: var(--font-color-light); border-top: 3px solid transparent; transition: all 0.2s ease; }
        .nav-link svg { width: 24px; height: 24px; margin-bottom: 4px; }
        .nav-link span { font-size: 0.7rem; }
        .nav-link.active { color: var(--primary-color); border-top-color: var(--accent-color); }

        .main-tab { height: 100%; display: none; flex-direction: column; padding-bottom: 100px; }
        .main-tab.active { display: flex; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .scrollable-content { overflow-y: auto; padding: 20px 15px; }

        .content-card { background-color: var(--surface-color); border-radius: 16px; padding: 20px; margin-bottom: 20px; box-shadow: 0 5px 25px rgba(0,0,0,0.08); border: 1px solid var(--border-color); }
        .content-card h3 { font-size: 1.6rem; color: var(--primary-color); margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid var(--border-color); }
        .content-card h4 { font-family: 'Amiri Quran', serif; font-size: 1.5rem; margin-bottom: 10px; color: var(--primary-color); }
        .content-card p { line-height: 1.9; margin-bottom: 10px; white-space: pre-wrap; }
        .content-card .meta { font-size: 0.9rem; color: var(--accent-color); font-weight: bold; }
        
        #home-tab .prayer-highlight { text-align: center; padding: 25px; background: linear-gradient(135deg, var(--primary-color), #1A2E35); color: white; border-radius: 16px; margin-bottom: 20px; }
        #home-tab .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; }
        .feature-card { background-color: var(--surface-color); border-radius: 16px; padding: 20px; text-align: center; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.05); transition: transform 0.2s, box-shadow 0.2s; border: 1px solid var(--border-color); }
        .feature-card:hover { transform: translateY(-5px); }
        .feature-card svg { width: 36px; height: 36px; margin-bottom: 10px; color: var(--primary-color); }
        
        /* Quran Tab Layout */
        #quran-tab { padding: 0; }
        #quran-controls { padding: 15px; background-color: var(--surface-color); border-bottom: 1px solid var(--border-color); flex-shrink: 0; }
        #surah-content-container { flex-grow: 1; overflow-y: auto; padding: 20px; }
        #surah-content { font-family: 'Amiri Quran', serif; font-size: 1.8rem; line-height: 2.9; }
        #quran-audio-player { flex-shrink: 0; text-align: center; padding: 15px; background-color: var(--surface-color); border-top: 1px solid var(--border-color); box-shadow: 0 -2px 10px rgba(0,0,0,0.1); }
        
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); z-index: 2000; display: none; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { width: 95%; max-width: 600px; max-height: 90vh; background-color: var(--background-color); border-radius: 16px; display: flex; flex-direction: column; }
        .modal-header { flex-shrink: 0; display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; background-color: var(--surface-color); border-bottom: 1px solid var(--border-color); }
        .modal-title { font-size: 1.5rem; font-weight: 700; color: var(--primary-color); }
        .modal-close-btn { background: none; border: none; font-size: 2rem; cursor: pointer; color: var(--font-color-light); }
        .modal-body { flex-grow: 1; overflow-y: auto; padding: 20px; }
        
        #tasbeeh-container { text-align: center; }
        #tasbeeh-counter { width: 220px; height: 220px; border: 10px solid var(--surface-color); background: linear-gradient(145deg, var(--primary-color), #004d40); color: white; font-size: 4.5rem; display: flex; align-items: center; justify-content: center; margin: 20px auto; cursor: pointer; user-select: none; border-radius: 50%; }
        #tasbeeh-reset { background-color: var(--accent-color); color: #333; border: none; border-radius: 50px; padding: 12px 25px; cursor: pointer; font-weight: bold; margin-top: 20px; }

        .selector-group { display: flex; flex-wrap: wrap; gap: 10px; }
        .selector { flex: 1; min-width: 150px; padding: 12px; font-size: 0.9rem; border-radius: 8px; border: 1px solid var(--border-color); background-color: var(--background-color); color: var(--font-color); }
        #audio-controls button { background-color: var(--primary-color); color: white; border: none; border-radius: 50%; width: 50px; height: 50px; font-size: 1.5rem; cursor: pointer; margin: 0 10px; }
        
        .profile-header { text-align: center; margin-bottom: 30px; }
        .profile-pic { width: 120px; height: 120px; border-radius: 50%; background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); margin: 0 auto 15px auto; display: flex; align-items: center; justify-content: center; font-size: 3rem; color: white; font-weight: bold; }
        .contact-list a { display: flex; align-items: center; padding: 15px; margin-bottom: 10px; border-radius: 12px; background-color: var(--background-color); text-decoration: none; color: var(--font-color); }
        .contact-list svg { width: 24px; height: 24px; margin-left: 15px; color: var(--primary-color); }
    </style>
</head>
<body>
    
    <div id="app-container">
        <header>
             <h1 style="font-size: 1.5rem; font-family: 'Amiri Quran', serif;">Ø¥Ù‚Ø±Ø£</h1>
             <button id="theme-toggle" style="background:none; border:none; font-size:1.5rem; color:white; cursor:pointer;">ğŸŒ™</button>
        </header>
        <main>
            <div id="home-tab" class="main-tab active">
                <div class="scrollable-content">
                    <div class="content-card" id="prayer-times-card"><p>Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©...</p></div>
                    <div class="feature-grid">
                        <div class="feature-card" data-target-tab="quran-tab"> <svg fill="currentColor" viewBox="0 0 24 24"><path d="M18,22A2,2 0 0,0 20,20V4A2,2 0 0,0 18,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18M13,4V11L15.5,9.5L18,11V4H13Z" /></svg> <h3>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h3></div>
                        <div class="feature-card" data-modal="tasbeeh-modal"> <svg fill="currentColor" viewBox="0 0 24 24"><path d="M8,12H9.5A2.5,2.5 0 0,0 12,9.5A2.5,2.5 0 0,0 9.5,7H8A4,4 0 0,0 4,11V13A4,4 0 0,0 8,17H9.5A2.5,2.5 0 0,0 12,19.5A2.5,2.5 0 0,0 14.5,17H16A4,4 0 0,0 20,13V11A4,4 0 0,0 16,7H14.5A2.5,2.5 0 0,0 12,4.5A2.5,2.5 0 0,0 9.5,7H8V5H6V7H5V9H6V11H4V13H6V15H5V17H6V19H8V17Z" /></svg> <h3>Ø§Ù„Ø³Ø¨Ø­Ø©</h3> </div>
                        <div class="feature-card" data-modal="adhkar-modal"> <svg fill="currentColor" viewBox="0 0 24 24"><path d="M18 16.08C17.24 16.08 16.56 16.38 16.04 16.85L8.91 12.7C8.96 12.47 9 12.24 9 12S8.96 11.53 8.91 11.3L16.04 7.15C16.56 7.62 17.24 7.92 18 7.92C19.66 7.92 21 6.58 21 4.92S19.66 1.92 18 1.92 15 3.26 15 4.92C15 5.16 15.04 5.39 15.09 5.61L7.96 9.75C7.44 9.28 6.76 8.98 6 8.98C4.34 8.98 3 10.32 3 11.98S4.34 14.98 6 14.98C6.76 14.98 7.44 14.68 7.96 14.21L15.09 18.35C15.04 18.57 15 18.8 15 19.04C15 20.7 16.34 22.04 18 22.04S21 20.7 21 19.04 19.66 16.08 18 16.08Z" /></svg> <h3>Ø§Ù„Ø£Ø°ÙƒØ§Ø±</h3> </div>
                        <div class="feature-card" data-modal="hadith-modal"> <svg fill="currentColor" viewBox="0 0 24 24"><path d="M12,10L8,6L9.4,4.6L12,7.2L14.6,4.6L16,6L12,10M12,14L16,18L14.6,19.4L12,16.8L9.4,19.4L8,18L12,14M4,20V4H6V2H8V4H16V2H18V4H20V20H4Z" /></svg> <h3>Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«</h3> </div>
                        <div class="feature-card" data-modal="stories-modal"> <svg fill="currentColor" viewBox="0 0 24 24"><path d="M17.5,12A1.5,1.5 0 0,1 19,10.5A1.5,1.5 0 0,1 17.5,9A1.5,1.5 0 0,1 16,10.5A1.5,1.5 0 0,1 17.5,12M14.5,12A1.5,1.5 0 0,1 16,13.5A1.5,1.5 0 0,1 14.5,15A1.5,1.5 0 0,1 13,13.5A1.5,1.5 0 0,1 14.5,12M9.5,12A1.5,1.5 0 0,1 11,10.5A1.5,1.5 0 0,1 9.5,9A1.5,1.5 0 0,1 8,10.5A1.5,1.5 0 0,1 9.5,12M6.5,12A1.5,1.5 0 0,1 8,13.5A1.5,1.5 0 0,1 6.5,15A1.5,1.5 0 0,1 5,13.5A1.5,1.5 0 0,1 6.5,12M12,20C10.13,20 8.44,19.5 7,18.65L3,20L4.35,16C3.5,14.56 3,12.88 3,11A9,9 0 0,1 12,2C16.97,2 21,6.03 21,11C21,15.97 16.97,20 12,20Z" /></svg> <h3>Ù‚ØµØµ Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡</h3> </div>
                        <div class="feature-card" data-modal="radio-modal"> <svg fill="currentColor" viewBox="0 0 24 24"><path d="M3,9H5V15H3V9M9,9H11V15H9V9M5,17H7V7H5V17M13,7V17H15V7H13M15,9H17V15H15V9M19,9H21V15H19V9M7,17H9V7H7V17M17,17H19V7H17V17Z" /></svg> <h3>Ø§Ù„Ø¥Ø°Ø§Ø¹Ø©</h3> </div>
                    </div>
                </div>
            </div>
            
            <div id="quran-tab" class="main-tab">
                <div id="quran-controls">
                    <div class="selector-group">
                        <select id="surah-selector" class="selector" title="Ø§Ø®ØªØ± Ø³ÙˆØ±Ø©"></select>
                        <select id="recitation-style-selector" class="selector" title="Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„ØªÙ„Ø§ÙˆØ©"></select>
                        <select id="reciter-selector" class="selector" title="Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø§Ø±Ø¦"></select>
                    </div>
                </div>
                <div id="surah-content-container">
                    <div id="surah-content"></div>
                </div>
                 <div id="quran-audio-player">
                    <div id="audio-controls">
                        <button id="prev-btn" title="Ø§Ù„Ø³Ø§Ø¨Ù‚">â®</button> <button id="play-pause-btn" title="ØªØ´ØºÙŠÙ„">â–¶ï¸</button> <button id="next-btn" title="Ø§Ù„ØªØ§Ù„ÙŠ">â­</button>
                    </div>
                </div>
            </div>

            <div id="profile-tab" class="main-tab">
                 <div class="content-card">
                    <div class="profile-header"> <div class="profile-pic">AW</div> <h2>AhmedWael Kamal</h2> <p>Ù…Ø¨Ø±Ù…Ø¬ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</p> </div>
                    <div class="contact-list">
                         <a href="https://www.facebook.com/share/174w8cAZfy/" target="_blank" rel="noopener noreferrer"> <svg fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.04C6.5 2.04 2 6.53 2 12.06C2 17.06 5.66 21.21 10.44 21.96V14.96H7.9V12.06H10.44V9.81C10.44 7.31 11.93 5.96 14.22 5.96C15.31 5.96 16.45 6.15 16.45 6.15V8.62H15.19C13.95 8.62 13.56 9.39 13.56 10.18V12.06H16.34L15.89 14.96H13.56V21.96C18.34 21.21 22 17.06 22 12.06C22 6.53 17.5 2.04 12 2.04Z"/></svg> <span>ÙÙŠØ³Ø¨ÙˆÙƒ</span> </a>
                         <a href="https://wa.me/201275425111" target="_blank" rel="noopener noreferrer"> <svg fill="currentColor" viewBox="0 0 24 24"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.59 15.35 3.45 16.86L2.05 22L7.3 20.62C8.75 21.41 10.37 21.82 12.04 21.82C17.5 21.82 21.95 17.37 21.95 11.91C21.95 6.45 17.5 2 12.04 2M12.04 3.67C16.56 3.67 20.28 7.39 20.28 11.91C20.28 16.43 16.56 20.15 12.04 20.15C10.46 20.15 8.96 19.68 7.72 18.83L7.23 18.53L4.35 19.31L5.15 16.51L4.83 16C3.92 14.65 3.45 13.07 3.45 11.91C3.45 7.39 7.17 3.67 12.04 3.67M9.23 7.76C8.96 7.76 8.71 7.76 8.49 8.24C8.27 8.72 7.63 9.35 7.63 10.53C7.63 11.71 8.51 12.82 8.66 13C8.81 13.18 10.21 15.52 12.55 16.46C14.89 17.4 14.89 16.93 15.28 16.88C15.67 16.83 16.71 16.22 16.93 15.59C17.15 14.96 17.15 14.44 17.08 14.34C17 14.24 16.82 14.19 16.55 14.05C16.28 13.91 15.09 13.3 14.87 13.21C14.65 13.12 14.5 13.07 14.34 13.34C14.18 13.61 13.69 14.19 13.55 14.33C13.41 14.47 13.26 14.52 13 14.42C12.74 14.32 11.75 14 10.62 13.02C9.73 12.24 9.14 11.25 8.99 10.98C8.84 10.71 9.01 10.55 9.15 10.41C9.28 10.29 9.42 10.09 9.56 9.93C9.7 9.77 9.75 9.65 9.84 9.47C9.93 9.29 9.88 9.15 9.84 9.06C9.79 8.96 9.23 7.76 9.23 7.76Z"/></svg> <span>ÙˆØ§ØªØ³Ø§Ø¨</span> </a>
                         <a href="mailto:ahmedwaelkamel2025@gmail.com" target="_blank" rel="noopener noreferrer"> <svg fill="currentColor" viewBox="0 0 24 24"><path d="M22 6C22 4.9 21.1 4 20 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6M20 6L12 11L4 6H20M20 18H4V8L12 13L20 8V18Z"/></svg> <span>Gmail</span> </a>
                    </div>
                 </div>
            </div>
        </main>
        
        <div id="tasbeeh-modal" class="modal"><div class="modal-content"><div class="modal-header"><h2 class="modal-title">Ø§Ù„Ø³Ø¨Ø­Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</h2><button class="modal-close-btn">&times;</button></div><div class="modal-body"><div id="tasbeeh-container"><div id="tasbeeh-counter">0</div><button id="tasbeeh-reset">ØªØµÙÙŠØ±</button></div></div></div></div>
        <div id="adhkar-modal" class="modal"><div class="modal-content"><div class="modal-header"><h2 class="modal-title">Ø§Ù„Ø£Ø°ÙƒØ§Ø±</h2><button class="modal-close-btn">&times;</button></div><div class="modal-body" id="adhkar-content"></div></div></div>
        <div id="hadith-modal" class="modal"><div class="modal-content"><div class="modal-header"><h2 class="modal-title">Ø§Ù„Ø£Ø±Ø¨Ø¹ÙˆÙ† Ø§Ù„Ù†ÙˆÙˆÙŠØ©</h2><button class="modal-close-btn">&times;</button></div><div class="modal-body" id="hadith-content"></div></div></div>
        <div id="stories-modal" class="modal"><div class="modal-content"><div class="modal-header"><h2 class="modal-title">Ù‚ØµØµ Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡</h2><button class="modal-close-btn">&times;</button></div><div class="modal-body" id="stories-content"></div></div></div>
        <div id="radio-modal" class="modal"><div class="modal-content"><div class="modal-header"><h2 class="modal-title">Ø§Ù„Ø¥Ø°Ø§Ø¹Ø©</h2><button class="modal-close-btn">&times;</button></div><div class="modal-body"><div class="content-card"><h3 style="text-align:center;">Ø¨Ø« Ù…Ø¨Ø§Ø´Ø±</h3><audio controls style="width: 100%;"><source src="https://n0e.radiojar.com/4wqre23fytzuv" type="audio/mpeg"></audio></div></div></div></div>
        
        <nav id="bottom-nav">
             <a class="nav-link active" data-tab="home-tab"> <svg fill="currentColor" viewBox="0 0 24 24"><path d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z" /></svg> <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span> </a>
            <a class="nav-link" data-tab="quran-tab"> <svg fill="currentColor" viewBox="0 0 24 24"><path d="M18,22A2,2 0 0,0 20,20V4A2,2 0 0,0 18,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18M13,4V11L15.5,9.5L18,11V4H13Z" /></svg> <span>Ø§Ù„Ù‚Ø±Ø¢Ù†</span> </a>
            <a class="nav-link" data-tab="profile-tab"> <svg fill="currentColor" viewBox="0 0 24 24"><path d="M12,12A5,5 0 0,0 17,7A5,5 0 0,0 12,2A5,5 0 0,0 7,7A5,5 0 0,0 12,12M12,14C9.33,14 4,15.33 4,18V20H20V18C20,15.33 14.67,14 12,14Z" /></svg> <span>Ø­Ø³Ø§Ø¨ÙŠ</span> </a>
        </nav>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        
        const state = { currentSurahNumber: 1, selectedReciterId: 7, surahsList: [], tasbeehCount: 0 };
        const audioPlayer = new Audio();
        
        const localData = {
            adhkar: [ { category: 'Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­', zekr: "Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ: Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ù„ÙØ§ Ø¥ÙÙ„ÙÙ°Ù‡Ù Ø¥ÙÙ„Ù‘ÙØ§ Ù‡ÙÙˆÙ...", count: "1", fadl: "Ù…Ù† Ù‚Ø§Ù„Ù‡Ø§ Ø­ÙŠÙ† ÙŠØµØ¨Ø­ Ø£Ø¬ÙŠØ± Ù…Ù† Ø§Ù„Ø¬Ù† Ø­ØªÙ‰ ÙŠÙ…Ø³ÙŠ." }, { category: 'Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­', zekr: "Ù‚Ù„ Ù‡Ùˆ Ø§Ù„Ù„Ù‡ Ø£Ø­Ø¯ØŒ ÙˆØ§Ù„Ù…Ø¹ÙˆØ°ØªÙŠÙ†", count: "3", fadl: "ØªÙƒÙÙŠÙ‡ Ù…Ù† ÙƒÙ„ Ø´ÙŠØ¡." }, { category: 'Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ù…Ø³Ø§Ø¡', zekr: "Ø¢ÙŠØ© Ø§Ù„ÙƒØ±Ø³ÙŠ", count: "1", fadl: "Ù…Ù† Ù‚Ø§Ù„Ù‡Ø§ Ø­ÙŠÙ† ÙŠÙ…Ø³ÙŠ Ø£Ø¬ÙŠØ± Ù…Ù† Ø§Ù„Ø¬Ù† Ø­ØªÙ‰ ÙŠØµØ¨Ø­." }, ],
            hadith: [ { id: 1, title: "Ø§Ù„Ø­Ø¯ÙŠØ« Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø¨Ø§Ù„Ù†ÙŠØ§Øª", body: `Ø¹Ù† Ø¹Ù…Ø± Ø¨Ù† Ø§Ù„Ø®Ø·Ø§Ø¨ Ø±Ø¶ÙŠ Ø§Ù„Ù„Ù‡ Ø¹Ù†Ù‡ØŒ Ù‚Ø§Ù„: Ø³Ù…Ø¹Øª Ø±Ø³ÙˆÙ„ Ø§Ù„Ù„Ù‡ ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ù„Ù… ÙŠÙ‚ÙˆÙ„: "Ø¥Ù†Ù…Ø§ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ Ø¨Ø§Ù„Ù†ÙŠÙ‘Ø§Øª..."` }, { id: 2, title: "Ø§Ù„Ø­Ø¯ÙŠØ« Ø§Ù„Ø«Ø§Ù†ÙŠ: Ù…Ø±Ø§ØªØ¨ Ø§Ù„Ø¯ÙŠÙ†", body: `Ø¹Ù† Ø¹Ù…Ø± Ø±Ø¶ÙŠ Ø§Ù„Ù„Ù‡ Ø¹Ù†Ù‡ Ø£ÙŠØ¶Ø§ØŒ Ù‚Ø§Ù„: Ø¨ÙŠÙ†Ù…Ø§ Ù†Ø­Ù† Ø¬Ù„ÙˆØ³ Ø¹Ù†Ø¯ Ø±Ø³ÙˆÙ„ Ø§Ù„Ù„Ù‡ ØµÙ„Ù‰ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙ‡ ÙˆØ³Ù„Ù… Ø°Ø§Øª ÙŠÙˆÙ…... Ø§Ù„Ø­Ø¯ÙŠØ«.` }, ],
            stories: [ { id: 1, title: "Ù‚ØµØ© Ø¢Ø¯Ù… Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…", body: "Ù‡Ùˆ Ø£Ø¨Ùˆ Ø§Ù„Ø¨Ø´Ø±ØŒ Ø®Ù„Ù‚Ù‡ Ø§Ù„Ù„Ù‡ Ù…Ù† Ø·ÙŠÙ†..." }, { id: 2, title: "Ù‚ØµØ© Ù†ÙˆØ­ Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ø³Ù„Ø§Ù…", body: "Ø£ÙˆÙ„ Ø§Ù„Ø±Ø³Ù„ Ø¥Ù„Ù‰ Ø£Ù‡Ù„ Ø§Ù„Ø£Ø±Ø¶, Ø¯Ø¹Ø§ Ù‚ÙˆÙ…Ù‡ 950 Ø³Ù†Ø©..." }, ],
            // The curated list of reciters
            reciters: [
                { id: 7, name: "Ù…Ø´Ø§Ø±ÙŠ Ø±Ø§Ø´Ø¯ Ø§Ù„Ø¹ÙØ§Ø³ÙŠ", style: "Murattal" },
                { id: 4, name: "Ù…Ø­Ù…ÙˆØ¯ Ø®Ù„ÙŠÙ„ Ø§Ù„Ø­ØµØ±ÙŠ", style: "Murattal" },
                { id: 1, name: "Ø¹Ø¨Ø¯Ø§Ù„Ø¨Ø§Ø³Ø· Ø¹Ø¨Ø¯Ø§Ù„ØµÙ…Ø¯", style: "Murattal" },
                { id: 10, name: "Ø³Ø¹Ø¯ Ø§Ù„ØºØ§Ù…Ø¯ÙŠ", style: "Murattal" },
                { id: 9, name: "Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„Ø³Ø¯ÙŠØ³", style: "Murattal" },
                { id: 8, name: "Ø³Ø¹ÙˆØ¯ Ø§Ù„Ø´Ø±ÙŠÙ…", style: "Murattal" },
                { id: 11, name: "Ø£Ø­Ù…Ø¯ Ø¨Ù† Ø¹Ù„ÙŠ Ø§Ù„Ø¹Ø¬Ù…ÙŠ", style: "Murattal" },
                { id: 3, name: "Ù…Ø§Ù‡Ø± Ø§Ù„Ù…Ø¹ÙŠÙ‚Ù„ÙŠ", style: "Murattal" },
                { id: 12, name: "ÙŠØ§Ø³Ø± Ø§Ù„Ø¯ÙˆØ³Ø±ÙŠ", style: "Murattal" },
                { id: 6, name: "Ù…Ø­Ù…Ø¯ ØµØ¯ÙŠÙ‚ Ø§Ù„Ù…Ù†Ø´Ø§ÙˆÙŠ", style: "Murattal" },
                { id: 2, name: "Ø¹Ø¨Ø¯Ø§Ù„Ø¨Ø§Ø³Ø· Ø¹Ø¨Ø¯Ø§Ù„ØµÙ…Ø¯ (ØªØ¬ÙˆÙŠØ¯)", style: "Mujawwad" },
                { id: 5, name: "Ù…Ø­Ù…ÙˆØ¯ Ø®Ù„ÙŠÙ„ Ø§Ù„Ø­ØµØ±ÙŠ (ØªØ¬ÙˆÙŠØ¯)", style: "Mujawwad" },
                { id: 15, name: "Ù…Ø­Ù…Ø¯ ØµØ¯ÙŠÙ‚ Ø§Ù„Ù…Ù†Ø´Ø§ÙˆÙŠ (ØªØ¬ÙˆÙŠØ¯)", style: "Mujawwad" }
            ]
        };

        const $ = (selector) => document.querySelector(selector);
        const $$ = (selector) => document.querySelectorAll(selector);
        
        async function fetchAPI(url) {
            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error(`API Error`);
                return await response.json();
            } catch (error) { console.error(`Fetch Error:`, error); return null; }
        }

        function setupNavigation() {
            $$('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    $$('.nav-link').forEach(l => l.classList.remove('active'));
                    $$('.main-tab').forEach(t => t.classList.remove('active'));
                    link.classList.add('active');
                    $(`#${link.dataset.tab}`)?.classList.add('active');
                });
            });

            $$('.feature-card').forEach(card => {
                card.addEventListener('click', () => {
                    if (card.dataset.targetTab) {
                        $(`.nav-link[data-tab="${card.dataset.targetTab}"]`).click();
                    } else if (card.dataset.modal) {
                        const modal = $(`#${card.dataset.modal}`);
                        if(modal) modal.classList.add('active');
                    }
                });
            });

            $$('.modal-close-btn').forEach(btn => {
                btn.addEventListener('click', () => btn.closest('.modal').classList.remove('active') );
            });
        }
        
        function setupTasbeeh() {
            const counterEl = $('#tasbeeh-counter');
            const resetBtn = $('#tasbeeh-reset');
            state.tasbeehCount = parseInt(localStorage.getItem('tasbeehCount') || '0');
            counterEl.textContent = state.tasbeehCount;

            counterEl.addEventListener('click', () => {
                state.tasbeehCount++;
                counterEl.textContent = state.tasbeehCount;
                localStorage.setItem('tasbeehCount', state.tasbeehCount);
            });
            resetBtn.addEventListener('click', () => {
                state.tasbeehCount = 0;
                counterEl.textContent = 0;
                localStorage.setItem('tasbeehCount', '0');
            });
        }

        function populateStaticContent() {
            const adhkarHtml = localData.adhkar.map(item => `<div class="content-card"><h4>${item.category}</h4><p>${item.zekr}</p><p class="meta">Ø§Ù„ØªÙƒØ±Ø§Ø±: ${item.count} | Ø§Ù„ÙØ¶Ù„: ${item.fadl}</p></div>`).join('');
            $('#adhkar-content').innerHTML = adhkarHtml;
            const hadithHtml = localData.hadith.map(item => `<div class="content-card"><h4>${item.title}</h4><p>${item.body}</p></div>`).join('');
            $('#hadith-content').innerHTML = hadithHtml;
            const storiesHtml = localData.stories.map(item => `<div class="content-card"><h4>${item.title}</h4><p>${item.body}</p></div>`).join('');
            $('#stories-content').innerHTML = storiesHtml;
        }

        async function setupQuranPlayer() {
            const surahSelector = $('#surah-selector');
            const styleSelector = $('#recitation-style-selector');
            const reciterSelector = $('#reciter-selector');
            
            async function updateSurahContent() {
                if (!state.selectedReciterId) { $('#surah-content').innerHTML = "<p>Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù‚Ø§Ø±Ø¦.</p>"; return; }
                $('#surah-content').innerHTML = `<p style="text-align:center;">... Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„ ...</p>`;
                const [versesData, audioData] = await Promise.all([
                    fetchAPI(`https://api.quran.com/api/v4/quran/verses/uthmani?chapter_number=${state.currentSurahNumber}`),
                    fetchAPI(`https://api.quran.com/api/v4/chapter_recitations/${state.selectedReciterId}/${state.currentSurahNumber}`)
                ]);
                
                if (!versesData || !audioData?.audio_file) { $('#surah-content').innerHTML = "<p>ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©. Ù‚Ø¯ Ù„Ø§ ØªÙƒÙˆÙ† Ù…ØªØ§Ø­Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø§Ø±Ø¦.</p>"; return; }
                audioPlayer.src = audioData.audio_file.audio_url;
                $('#play-pause-btn').textContent = 'â–¶ï¸';
                $('#surah-content').innerHTML = versesData.verses.map(v => `<span class="ayah">${v.text_uthmani}<span class="ayah-number">ï´¿${v.verse_key.split(':')[1]}ï´¾</span></span>`).join('');
            }

            function updateReciterList() {
                const style = styleSelector.value;
                const filteredReciters = localData.reciters.filter(r => r.style === style);
                reciterSelector.innerHTML = '';
                if (filteredReciters.length > 0) {
                    filteredReciters.forEach(reciter => { reciterSelector.innerHTML += `<option value="${reciter.id}">${reciter.name}</option>`; });
                    state.selectedReciterId = filteredReciters[0].id;
                } else {
                    reciterSelector.innerHTML = '<option>Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù‚Ø±Ø§Ø¡</option>';
                    state.selectedReciterId = null;
                }
            }
            
            const chapters = await fetchAPI(`https://api.quran.com/api/v4/chapters`);
            if (chapters) {
                state.surahsList = chapters.chapters;
                surahSelector.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø³ÙˆØ±Ø©...</option>';
                state.surahsList.forEach(surah => { surahSelector.innerHTML += `<option value="${surah.id}">${surah.id}. ${surah.name_arabic}</option>`; });
            }
            
            const styles = [...new Set(localData.reciters.map(r => r.style))];
            styleSelector.innerHTML = styles.map(s => `<option value="${s}">${s === 'Murattal' ? 'ØªØ±ØªÙŠÙ„' : 'ØªØ¬ÙˆÙŠØ¯'}</option>`).join('');
            updateReciterList();

            surahSelector.addEventListener('change', (e) => { if (e.target.value) { state.currentSurahNumber = parseInt(e.target.value); updateSurahContent(); }});
            styleSelector.addEventListener('change', () => { updateReciterList(); if(surahSelector.value) { updateSurahContent(); } });
            reciterSelector.addEventListener('change', (e) => { if (e.target.value) { state.selectedReciterId = parseInt(e.target.value); if(surahSelector.value) { updateSurahContent(); } }});
            
            $('#audio-controls').addEventListener('click', (e) => {
                if(e.target.tagName !== 'BUTTON') return;
                const targetId = e.target.id;
                if (targetId === 'play-pause-btn') {
                    if (!audioPlayer.src || !state.selectedReciterId) return;
                    if (audioPlayer.paused) { audioPlayer.play(); e.target.textContent = 'â¸ï¸'; } 
                    else { audioPlayer.pause(); e.target.textContent = 'â–¶ï¸'; }
                } else {
                    let direction = targetId === 'next-btn' ? 1 : -1;
                    let newSurah = state.currentSurahNumber + direction;
                    if (newSurah >= 1 && newSurah <= 114) {
                        state.currentSurahNumber = newSurah;
                        surahSelector.value = newSurah;
                        updateSurahContent();
                    }
                }
            });
            audioPlayer.addEventListener('ended', () => $('#play-pause-btn').textContent = 'â–¶ï¸');
        }

        async function initializeHomeTab() {
            const today = new Date();
            const dateString = `${today.getDate()}-${today.getMonth() + 1}-${today.getFullYear()}`;
            const prayerData = await fetchAPI(`https://api.aladhan.com/v1/timingsByCity/${dateString}?city=Alexandria&country=Egypt&method=5`);
            
            if(prayerData) {
                 const prayerNamesAr = { Fajr: "Ø§Ù„ÙØ¬Ø±", Dhuhr: "Ø§Ù„Ø¸Ù‡Ø±", Asr: "Ø§Ù„Ø¹ØµØ±", Maghrib: "Ø§Ù„Ù…ØºØ±Ø¨", Isha: "Ø§Ù„Ø¹Ø´Ø§Ø¡" };
                 let html = `<h3>Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© (Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©)</h3><div class="info-grid">`;
                 Object.keys(prayerNamesAr).forEach(key => {
                     const timeParts = prayerData.data.timings[key].split(' ');
                     html += `<div class="info-item"><h5>${prayerNamesAr[key]}</h5><p style="font-size:1.2rem; font-weight:bold;">${timeParts[0]}</p></div>`; 
                 });
                 html += `</div>`;
                 $('#prayer-times-card').innerHTML = html;
            }
        }
        
        function setupTheme() {
            const themeToggle = $('#theme-toggle');
            if (localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
                themeToggle.textContent = 'â˜€ï¸';
            }
            themeToggle.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                const isDark = document.body.classList.contains('dark-mode');
                themeToggle.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
            });
        }
        
        try {
            setupNavigation();
            setupTasbeeh();
            populateStaticContent();
            setupTheme();
            initializeHomeTab();
            setupQuranPlayer();
        } catch (error) {
            console.error("Fatal Error during app initialization:", error);
            document.body.innerHTML = `<h1>Ø­Ø¯Ø« Ø®Ø·Ø£ ÙØ§Ø¯Ø­ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚.</h1><p>${error.message}</p>`;
        }
    });
    </script>
</body>
</html>
