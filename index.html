<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… - Ù†ÙˆØ± Ø§Ù„Ù‡Ø¯Ù‰</title>
    <link rel="manifest" href="data:application/json;base64,eyJpY29ucyI6IFt7InNyYyI6ICJpY29uLTE5Mi5wbmciLCAic2l6ZXMiOiAiMTkyeDE5MiIsICJ0eXBlIjogImltYWdlL3BuZyJ9LCB7InNyYyI6ICJpY29uLTUxMi5wbmciLCAic2l6ZXMiOiAiNTEyeDUxMiIsICJ0eXBlIjogImltYWdlL3BuZyJ9XSwgImxhbmciOiAiYXItU0EiLCAibmFtZSI6ICJcdTA2MjhcdTA2ODBcdTA2MzhcdTA2NjhcdTA2NjcgXHUwNjM5XHUwNjY0XHUwNjgwXHUwNjM0IFx1MDYyYlx1MDY0NVx1MDY3MFx1MDYzNFx1MDY0OVx1MDYyZFx1MDYyMiIsICJzaG9ydF9uYW1lIjogIlx1MDYyOFx1MDY4MFx1MDYzOFx1MDY2NyIsICJkZXNjcmlwdGlvbiI6ICJcdTA2MzhcdTA2NjRcdTA2ODAgXHUwNjM5XHUwNjY0XHUwNjgwXHUwNjM0IFx1MDYyYlx1MDY0NVx1MDY3MFx1MDYzNFx1MDY0OVx1MDYyZFx1MDYyMiIsInN0YXJ0X3VybCI6ICIvaW5kZXguaHRtbCIsICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLCAiYmFja2dyb3VuZF9jb2xvciI6ICIjMGYwZjBmIiwgInRoZW1lX2NvbG9yIjogIiNkNGFmMzciLCAib3JpZW50YXRpb24iOiAicG9ydHJhaXQtcHJpbWFyeSJ9">

    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@300;400;700&family=Reem+Kufi:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --main-gold: #d4af37;
            --dark-bg: #1a1a1a;
            --darker-bg: #0f0f0f;
            --card-bg: #252525;
            --text-color: #f0f0f0;
            --secondary-text: #b0b0b0;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }
        body { font-family: 'Cairo', sans-serif; background-color: var(--darker-bg); color: var(--text-color); overflow-x: hidden; }

        /* --- Scrollbar --- */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--darker-bg); }
        ::-webkit-scrollbar-thumb { background: var(--main-gold); border-radius: 4px; }

        /* --- Layout --- */
        .app-container { display: flex; min-height: 100vh; }
        
        /* Sidebar */
        aside {
            width: 280px; background: var(--dark-bg); border-left: 1px solid #333; padding: 20px;
            position: fixed; height: 100vh; right: 0; top: 0; z-index: 1000; transition: 0.3s;
            display: flex; flex-direction: column; overflow-y: auto;
        }
        .logo { text-align: center; margin-bottom: 30px; color: var(--main-gold); }
        .logo h1 { font-family: 'Reem Kufi', sans-serif; font-size: 1.6rem; }
        
        nav button {
            background: transparent; border: none; color: var(--secondary-text); width: 100%; padding: 12px 15px;
            text-align: right; font-size: 1rem; cursor: pointer; transition: 0.3s; border-radius: 8px;
            margin-bottom: 5px; display: flex; align-items: center; gap: 10px; font-family: 'Cairo';
        }
        nav button:hover, nav button.active { background: var(--main-gold); color: var(--darker-bg); font-weight: bold; }

        /* Main Content */
        main { flex: 1; margin-right: 280px; padding: 20px; transition: 0.3s; }
        section { display: none; animation: fadeIn 0.5s ease; }
        section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        h2 { font-family: 'Reem Kufi'; color: var(--main-gold); margin-bottom: 20px; border-bottom: 2px solid #333; padding-bottom: 10px; }

        .card { background: var(--card-bg); border-radius: 15px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        
        select, input { width: 100%; padding: 12px; background: var(--darker-bg); border: 1px solid #444; color: #fff; border-radius: 8px; margin-bottom: 15px; font-family: 'Cairo'; }

        /* --- Quran Text & Tafsir (FIXED) --- */
        #quran-content {
            font-family: 'Amiri', serif; font-size: 26px; line-height: 2.3; text-align: justify;
            background: #fffdf5; color: #000; padding: 30px; border-radius: 10px; border: 4px solid var(--main-gold);
        }
        .ayah-span { 
            cursor: pointer; 
            transition: 0.2s; 
            padding: 2px 5px; 
            border-radius: 5px;
            /* ** Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†Øµ ** */
            user-select: none; 
            -webkit-user-select: none; 
            -moz-user-select: none; 
        }
        .ayah-span:hover { background-color: rgba(212, 175, 55, 0.2); }
        .ayah-number { color: #b08d28; font-size: 0.8em; margin: 0 5px; font-family: sans-serif; }
        
        /* Modal for Tafsir */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 2000; align-items: center; justify-content: center;
        }
        .modal-content {
            background: var(--card-bg); color: #fff; padding: 25px; border-radius: 15px;
            max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto; text-align: center;
            border: 2px solid var(--main-gold);
        }
        .modal-close { background: #c0392b; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin-top: 15px; }

        /* Auto Scroll Button */
        .fab-scroll {
            position: fixed;
            bottom: 30px;
            left: 30px;
            background: var(--main-gold);
            color: var(--darker-bg);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.4);
            z-index: 999;
            font-size: 1.5rem;
            transition: 0.3s;
        }
        .fab-scroll.active { background: #e74c3c; color: white; animation: pulse 1s infinite; }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(231, 76, 60, 0); }
            100% { box-shadow: 0 0 0 0 rgba(231, 76, 60, 0); }
        }

        /* --- Adhkar Grid --- */
        .adhkar-tabs { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; margin-bottom: 15px; }
        .adhkar-tabs button { white-space: nowrap; padding: 8px 15px; background: #333; color: white; border: none; border-radius: 20px; cursor: pointer; }
        .adhkar-tabs button.active { background: var(--main-gold); color: black; }
        
        .adhkar-item { background: #333; padding: 15px; margin-bottom: 10px; border-radius: 8px; border-right: 3px solid var(--main-gold); }
        .adhkar-text { font-size: 1.1rem; margin-bottom: 8px; line-height: 1.6; }
        .adhkar-meta { font-size: 0.9rem; color: var(--main-gold); display: flex; justify-content: space-between; }

        /* --- Hadith --- */
        .hadith-container { max-height: 600px; overflow-y: auto; }
        .hadith-card { background: #333; padding: 20px; margin-bottom: 15px; border-radius: 10px; }

        /* --- Developer --- */
        .dev-profile { text-align: center; padding: 30px; }
        .dev-img { width: 120px; height: 120px; border-radius: 50%; border: 3px solid var(--main-gold); margin-bottom: 15px; object-fit: cover; }
        .social-btn {
            display: inline-flex; align-items: center; gap: 10px; padding: 10px 20px;
            margin: 5px; border-radius: 30px; text-decoration: none; color: white; font-weight: bold; transition: 0.3s;
        }
        .social-btn:hover { transform: translateY(-3px); }
        .btn-wa { background: #25D366; }
        .btn-fb { background: #1877F2; }
        .btn-tg { background: #0088cc; }

        /* --- Responsive FIX for Sidebar Overlap --- */
        .mobile-toggle { 
            display: none; 
            position: fixed; 
            top: 15px; 
            right: 15px; 
            background: var(--main-gold); 
            padding: 10px; 
            border-radius: 5px; 
            z-index: 1100; 
            cursor: pointer; 
            border: none; 
        }
        
        @media (max-width: 768px) {
            /* ** Ø§Ù„Ø­Ù„: ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø®Ø§Ø±Ø¬ Ø§Ù„Ø´Ø§Ø´Ø© ÙˆØ¥Ø¹Ø§Ø¯ØªÙ‡Ø§ Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­ ** */
            aside { 
                transform: translateX(100%); 
                width: 260px; 
                box-shadow: 0 0 20px rgba(0,0,0,0.8); /* Ø¥Ø¶Ø§ÙØ© Ø¸Ù„ Ù„Ø¥Ø­Ø³Ø§Ø³ Ø§Ù„ØªØºØ·ÙŠØ© */
            }
            aside.open { 
                transform: translateX(0); /* Ø¹Ù†Ø¯ Ø§Ù„ÙØªØ­ ØªØ¹ÙˆØ¯ Ù„Ù…ÙˆÙ‚Ø¹Ù‡Ø§ */
            }
            main { 
                /* Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù‡Ø§Ù…Ø´ Ø§Ù„Ø£ÙŠÙ…Ù† ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ù‡Ø§ØªÙ */
                margin-right: 0; 
                padding: 15px; 
                padding-top: 60px; 
            }
            .mobile-toggle { 
                display: block; 
            }
        }
    </style>
</head>
<body>

    <button class="mobile-toggle" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>

    <div id="tafsirModal" class="modal">
        <div class="modal-content">
            <h3 id="tafsirTitle" style="color: var(--main-gold); margin-bottom: 15px;">ØªÙØ³ÙŠØ± Ø§Ù„Ø¢ÙŠØ©</h3>
            <p id="tafsirText" style="font-size: 1.1rem; line-height: 1.8;">...</p>
            <button class="modal-close" onclick="closeTafsir()">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <div class="app-container">
        <aside id="sidebar">
            <div class="logo">
                <i class="fas fa-quran" style="font-size: 3rem;"></i>
                <h1>Ù†ÙˆØ± Ø§Ù„Ù‡Ø¯Ù‰</h1>
            </div>
            <nav>
                <button onclick="nav('read')" class="active"><i class="fas fa-book-open"></i> Ù‚Ø±Ø§Ø¡Ø© ÙˆØªÙØ³ÙŠØ±</button>
                <button onclick="nav('listen')"><i class="fas fa-headphones"></i> Ø¥Ø°Ø§Ø¹Ø© Ø§Ù„Ù‚Ø±Ø¢Ù†</button>
                <button onclick="nav('adhkar')"><i class="fas fa-hands-praying"></i> Ø§Ù„Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ø´Ø§Ù…Ù„Ø©</button>
                <button onclick="nav('hadith')"><i class="fas fa-scroll"></i> Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ« Ø§Ù„Ù†Ø¨ÙˆÙŠØ©</button>
                <button onclick="nav('prayer')"><i class="fas fa-mosque"></i> Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</button>
                <button onclick="nav('tasbeeh')"><i class="fas fa-fingerprint"></i> Ø§Ù„Ø³Ø¨Ø­Ø©</button>
                <button onclick="nav('developer')"><i class="fas fa-code"></i> Ø§Ù„Ù…Ø·ÙˆØ± Ahmed Wael</button>
            </nav>
        </aside>

        <main>
            
            <section id="read" class="active">
                <div class="card">
                    <h2>Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… (Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¢ÙŠØ© Ù„Ù„ØªÙØ³ÙŠØ±)</h2>
                    <select id="surahSelectRead" onchange="loadSurahText(this.value)"></select>
                    <div id="quran-content">
                        <p style="text-align: center;">Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø© Ù„Ù„Ø¨Ø¯Ø¡...</p>
                    </div>
                </div>
                <div class="fab-scroll" id="scrollBtn" onclick="toggleAutoScroll()">
                    <i class="fas fa-arrow-down"></i>
                </div>
            </section>

            <section id="listen">
                <div class="card">
                    <h2>Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ (Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚Ø±Ø§Ø¡)</h2>
                    <select id="reciterSelect" onchange="updateReciterSurahs()"><option>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ø±Ø§Ø¡...</option></select>
                    <select id="surahSelectAudio"><option>Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø§Ø±Ø¦ Ø£ÙˆÙ„Ø§Ù‹</option></select>
                    <button onclick="playAudio()" style="width: 100%; padding: 15px; background: var(--main-gold); border: none; border-radius: 8px; font-weight: bold; margin-top: 10px; cursor: pointer;">ØªØ´ØºÙŠÙ„ <i class="fas fa-play"></i></button>
                    <audio id="audioPlayer" controls style="width:100%; margin-top:15px;"></audio>
                </div>
            </section>

            <section id="adhkar">
                <div class="card">
                    <h2>Ø§Ù„Ø£Ø°ÙƒØ§Ø± ÙˆØ­ØµÙ† Ø§Ù„Ù…Ø³Ù„Ù…</h2>
                    <div class="adhkar-tabs" id="adhkarTabs">
                        </div>
                    <div id="adhkarList"></div>
                </div>
            </section>

            <section id="hadith">
                <div class="card">
                    <h2>Ø§Ù„Ø£Ø±Ø¨Ø¹ÙˆÙ† Ø§Ù„Ù†ÙˆÙˆÙŠØ© ÙˆØµØ­ÙŠØ­ Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«</h2>
                    <div class="hadith-container" id="hadithList">
                        <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«...</p>
                    </div>
                </div>
            </section>

            <section id="prayer">
                <div class="card">
                    <h2>Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</h2>
                    <div id="prayer-display" style="text-align: center;">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
                </div>
            </section>

            <section id="tasbeeh">
                <div class="card" style="text-align: center; padding: 50px;">
                    <h2>Ø§Ù„Ø³Ø¨Ø­Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</h2>
                    <h1 id="tasbeehCounter" style="font-size: 5rem; color: var(--main-gold);">0</h1>
                    <button onclick="countTasbeeh()" style="width: 150px; height: 150px; border-radius: 50%; border: none; background: radial-gradient(circle, var(--main-gold), #b08d28); font-size: 1.5rem; font-weight: bold; box-shadow: 0 0 20px rgba(212,175,55,0.4);">Ø³Ø¨Ù‘Ø­</button>
                    <br><br>
                    <button onclick="resetTasbeeh()" style="background:none; border:1px solid #fff; color:#fff; padding:5px 15px; border-radius:5px;">ØªØµÙÙŠØ±</button>
                </div>
            </section>

            <section id="developer">
                <div class="card dev-profile">
                    <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Ahmed Wael" class="dev-img">
                    <h1 style="color: var(--main-gold); font-family: 'Reem Kufi';">Ahmed Wael</h1>
                    <p style="color: #aaa; margin-bottom: 20px;">Full Stack Developer</p>
                    <p style="margin-bottom: 30px;">ØªÙ… ØªØ·ÙˆÙŠØ± Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØµØ¯Ù‚Ø© Ø¬Ø§Ø±ÙŠØ©. ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ø±Ø¢Ù† ÙƒØ§Ù…Ù„Ø§Ù‹ Ù…Ø¹ Ø§Ù„ØªÙØ³ÙŠØ±ØŒ Ø§Ù„Ø£Ø°ÙƒØ§Ø±ØŒ ÙˆØ§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«ØŒ ÙˆÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©.</p>
                    
                    <div style="display: flex; flex-direction: column; align-items: center; gap: 10px;">
                        <a href="https://wa.me/201275425111" target="_blank" class="social-btn btn-wa">
                            <i class="fab fa-whatsapp"></i> ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
                        </a>
                        <a href="https://www.facebook.com/share/1AGP8W9eBk/" target="_blank" class="social-btn btn-fb">
                            <i class="fab fa-facebook"></i> ØªØ§Ø¨Ø¹Ù†ÙŠ Ø¹Ù„Ù‰ ÙÙŠØ³Ø¨ÙˆÙƒ
                        </a>
                        <a href="https://t.me/ahmedwael2020" target="_blank" class="social-btn btn-tg">
                            <i class="fab fa-telegram"></i> ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ØªÙ„ÙŠØ¬Ø±Ø§Ù…
                        </a>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <script type="text/worker" id="service-worker-code">
        const CACHE_NAME = 'NoorAlhuda-v1.0.2'; 
        const urlsToCache = [
            '/',
            '/index.html',
            'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css',
        ];

        self.addEventListener('install', event => {
            event.waitUntil(
                caches.open(CACHE_NAME)
                    .then(cache => {
                        console.log('Opened cache and pre-caching assets');
                        return cache.addAll(urlsToCache).catch(err => {
                            console.error('Failed to add some URLs to cache:', err);
                        });
                    })
            );
        });

        self.addEventListener('fetch', event => {
            event.respondWith(
                caches.match(event.request)
                    .then(response => {
                        if (response) {
                            return response;
                        }
                        return fetch(event.request).catch(error => {
                            console.error('Fetch failed for:', event.request.url, error);
                        });
                    })
            );
        });

        self.addEventListener('activate', event => {
            const cacheWhitelist = [CACHE_NAME];
            event.waitUntil(
                caches.keys().then(cacheNames => {
                    return Promise.all(
                        cacheNames.map(cacheName => {
                            if (cacheWhitelist.indexOf(cacheName) === -1) {
                                console.log('Deleting old cache:', cacheName);
                                return caches.delete(cacheName);
                            }
                        })
                    );
                })
            );
        });
    </script>
    <script>
        // Ø¯Ø§Ù„Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù€ Service Worker
        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                // ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ´ÙŠØ± Ù‡Ø°Ø§ Ø¥Ù„Ù‰ Ù…Ù„Ù SW.js Ø§Ù„ÙØ¹Ù„ÙŠ Ø¨Ø¹Ø¯ ÙØµÙ„ Ø§Ù„ÙƒÙˆØ¯
                navigator.serviceWorker.register('/sw.js').then(registration => {
                    console.log('Service Worker registered successfully.');
                }).catch(err => {
                    console.log('Service Worker registration failed. Make sure sw.js exists.', err);
                });
            } else {
                console.log('Service Workers are not supported in this browser.');
            }
        }
        
        window.addEventListener('load', registerServiceWorker);


        // --- ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ---
        let allSurahs = [];
        let recitersList = [];

        document.addEventListener('DOMContentLoaded', () => {
            fetchSurahs();
            fetchReciters();
            loadAdhkarData();
            fetchHadiths();
            getPrayerTimes();
        });

        // ğŸš€ Ø¯Ø§Ù„Ø© nav(id) Ø§Ù„Ù…Ø­Ø¯Ø«Ø© Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ù‚Ø±
        function nav(id) {
            document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            
            const btn = Array.from(document.querySelectorAll('nav button')).find(b => b.getAttribute('onclick').includes(id));
            if(btn) btn.classList.add('active');
            
            // ** Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø¶Ø§Ù Ù„Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù‡ÙˆØ§ØªÙ **
            const sidebar = document.getElementById('sidebar');
            // ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù…ÙØªÙˆØ­Ø© ÙˆØ£Ù† Ø§Ù„Ø¬Ù‡Ø§Ø² Ù‡Ùˆ Ù‡Ø§ØªÙ (Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø§Ø´Ø© ØµØºÙŠØ±)
            if(sidebar.classList.contains('open') && window.innerWidth <= 768) {
                sidebar.classList.remove('open');
                document.body.style.overflow = 'auto'; // Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªÙ…Ø±ÙŠØ±
            }
            // ** Ù†Ù‡Ø§ÙŠØ© Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø¶Ø§Ù **
            
            stopAutoScroll();
        }
        
        // Ø¯Ø§Ù„Ø© ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© (Ù„Ù„Ø²Ø± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)
        function toggleSidebar() { 
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('open'); 

            // Ù…Ù†Ø¹ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¹Ù†Ø¯Ù…Ø§ ØªÙƒÙˆÙ† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù…ÙØªÙˆØ­Ø©
            if(sidebar.classList.contains('open')) {
                document.body.style.overflow = 'hidden'; 
            } else {
                document.body.style.overflow = 'auto';
            }
        }

        // --- 1. Ø§Ù„Ù‚Ø±Ø¢Ù† ÙˆØ§Ù„ØªÙØ³ÙŠØ± (ØªÙ… Ø§Ù„Ø¥ØµÙ„Ø§Ø­) ---
        async function fetchSurahs() {
            try {
                const res = await fetch('https://api.alquran.cloud/v1/surah');
                const data = await res.json();
                allSurahs = data.data;
                const sel = document.getElementById('surahSelectRead');
                sel.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø©...</option>';
                allSurahs.forEach(s => sel.innerHTML += `<option value="${s.number}">${s.number}. ${s.name}</option>`);
            } catch(e) { console.error('Error fetching surahs'); }
        }

        async function loadSurahText(num) {
            if(!num) return;
            const div = document.getElementById('quran-content');
            div.innerHTML = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...';
            try {
                const res = await fetch(`https://api.alquran.cloud/v1/surah/${num}`);
                const data = await res.json();
                const surah = data.data;
                
                let html = `<h3 style="text-align:center; margin-bottom:20px;">${surah.name}</h3>`;
                if(num != 1 && num != 9) html += `<div style="text-align:center; margin-bottom:20px;">Ø¨ÙØ³Ù’Ù…Ù Ù±Ù„Ù„Ù‘ÙÙ‡Ù Ù±Ù„Ø±Ù‘ÙØ­Ù’Ù…ÙÙ°Ù†Ù Ù±Ù„Ø±Ù‘ÙØ­ÙÙŠÙ…Ù</div>`;
                
                surah.ayahs.forEach(ayah => {
                    const escapedText = ayah.text.replace(/'/g, "\\'").replace(/"/g, '\\"');
                    html += `<span class="ayah-span" onclick="showTafsir(${num}, ${ayah.numberInSurah}, '${escapedText}')">
                        ${ayah.text} <span class="ayah-number">(${ayah.numberInSurah})</span>
                    </span>`;
                });
                div.innerHTML = html;
            } catch(e) { div.innerHTML = 'ÙØ´Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„'; }
        }

        async function showTafsir(surahNum, ayahNum, ayahText) {
            const modal = document.getElementById('tafsirModal');
            document.getElementById('tafsirTitle').innerText = `ØªÙØ³ÙŠØ± Ø§Ù„Ø¢ÙŠØ© ${ayahNum}`;
            document.getElementById('tafsirText').innerHTML = 'Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØªÙØ³ÙŠØ±...';
            modal.style.display = 'flex';

            try {
                const res = await fetch(`https://quranenc.com/api/v1/translation/sura/arabic_moyassar/${surahNum}`);
                const data = await res.json();
                
                if(data && data.result) {
                    const ayahData = data.result.find(a => parseInt(a.aya) === ayahNum);
                    
                    if(ayahData) {
                        document.getElementById('tafsirText').innerHTML = `
                            <div style="color:#d4af37; margin-bottom:10px; font-style: italic; border-bottom: 1px solid #444; padding-bottom: 10px;">
                                <i class="fas fa-quote-right"></i> ${ayahText} <i class="fas fa-quote-left"></i>
                            </div>
                            <div style="text-align: right; direction: rtl;">${ayahData.translation}</div>
                        `;
                    } else {
                        document.getElementById('tafsirText').innerText = 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ØªÙØ³ÙŠØ± Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø¢ÙŠØ© ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.';
                    }
                } else {
                    document.getElementById('tafsirText').innerText = 'Ø®Ø·Ø£ ÙÙŠ Ø¨Ù†ÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ±Ø¬Ø¹Ø© Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù….';
                }
            } catch(e) {
                document.getElementById('tafsirText').innerText = 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù… Ù„Ø¬Ù„Ø¨ Ø§Ù„ØªÙØ³ÙŠØ±. (Ù‚Ø¯ ØªÙƒÙˆÙ† ØºÙŠØ± Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª)';
                console.error("Tafsir Error:", e);
            }
        }
        function closeTafsir() { document.getElementById('tafsirModal').style.display = 'none'; }

        // --- Auto Scroll ---
        let autoScrollInterval;
        function toggleAutoScroll() {
            const btn = document.getElementById('scrollBtn');
            if (autoScrollInterval) {
                stopAutoScroll();
            } else {
                btn.classList.add('active');
                btn.innerHTML = '<i class="fas fa-pause"></i>';
                autoScrollInterval = setInterval(() => {
                    window.scrollBy(0, 1);
                     if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {
                        stopAutoScroll();
                    }
                }, 40);
            }
        }

        function stopAutoScroll() {
            clearInterval(autoScrollInterval);
            autoScrollInterval = null;
            const btn = document.getElementById('scrollBtn');
            if (btn) {
                btn.classList.remove('active');
                btn.innerHTML = '<i class="fas fa-arrow-down"></i>';
            }
        }

        // --- 2. Ø§Ù„ØµÙˆØª ---
        async function fetchReciters() {
            try {
                const res = await fetch('https://www.mp3quran.net/api/v3/reciters?language=ar');
                const data = await res.json();
                recitersList = data.reciters.sort((a,b) => a.name.localeCompare(b.name));
                const sel = document.getElementById('reciterSelect');
                sel.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø§Ø±Ø¦...</option>';
                recitersList.forEach(r => sel.innerHTML += `<option value="${r.id}">${r.name}</option>`);
            } catch(e) {}
        }
        function updateReciterSurahs() {
            const rid = document.getElementById('reciterSelect').value;
            const reciter = recitersList.find(r => r.id == rid);
            const sel = document.getElementById('surahSelectAudio');
            sel.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø©...</option>';
            if(reciter) {
                reciter.moshaf[0].surah_list.split(',').forEach(s => {
                    const sName = allSurahs.find(x => x.number == s)?.name || s;
                    sel.innerHTML += `<option value="${s}">${s}. ${sName}</option>`;
                });
            }
        }
        function playAudio() {
            const rid = document.getElementById('reciterSelect').value;
            const sid = document.getElementById('surahSelectAudio').value;
            if(!rid || !sid) return alert('Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø§Ø±Ø¦ ÙˆØ§Ù„Ø³ÙˆØ±Ø©');
            const reciter = recitersList.find(r => r.id == rid);
            const server = reciter.moshaf[0].server;
            const pad = sid.toString().padStart(3,'0');
            const aud = document.getElementById('audioPlayer');
            aud.src = `${server}${pad}.mp3`;
            aud.play();
        }

        // --- 3. Ø§Ù„Ø£Ø°ÙƒØ§Ø± Ø§Ù„Ø´Ø§Ù…Ù„Ø© (Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø¯Ø§Ø®Ù„ÙŠØ© - Ù…ØªØ§Ø­Ø© Ø£ÙˆÙ Ù„Ø§ÙŠÙ†) ---
        const adhkarData = {
            "Ø§Ù„ØµØ¨Ø§Ø­": [
                {t: "Ø£ÙØµÙ’Ø¨ÙØ­Ù’Ù†ÙØ§ ÙˆÙØ£ÙØµÙ’Ø¨ÙØ­Ù Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ Ù„ÙÙ„Ù‘ÙÙ‡ÙØŒ ÙˆÙØ§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„Ù‘ÙÙ‡Ù Ù„Ø§Ù Ø¥Ù„Ù‡Ù Ø¥ÙÙ„Ø§Ù‘Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù ÙˆÙØ­Ù’Ø¯ÙÙ‡Ù Ù„Ø§Ù Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙ‡ÙØŒ Ù„ÙÙ‡Ù Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ ÙˆÙÙ„ÙÙ‡Ù Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù ÙˆÙÙ‡ÙÙˆÙ Ø¹ÙÙ„ÙÙ‰ ÙƒÙÙ„Ù‘Ù Ø´ÙÙŠÙ’Ø¡Ù Ù‚ÙØ¯ÙÙŠØ±ÙŒ. Ø±ÙØ¨Ù‘Ù Ø£ÙØ³Ù’Ø£ÙÙ„ÙÙƒÙ Ø®ÙÙŠÙ’Ø±Ù Ù…ÙØ§ ÙÙÙŠ Ù‡ÙØ°ÙØ§ Ø§Ù„Ù’ÙŠÙÙˆÙ’Ù…Ù ÙˆÙØ®ÙÙŠÙ’Ø±Ù Ù…ÙØ§ Ø¨ÙØ¹Ù’Ø¯ÙÙ‡ÙØŒ ÙˆÙØ£ÙØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙ Ù…ÙÙ†Ù’ Ø´ÙØ±Ù‘Ù Ù…ÙØ§ ÙÙÙŠ Ù‡ÙØ°ÙØ§ Ø§Ù„Ù’ÙŠÙÙˆÙ’Ù…Ù ÙˆÙØ´ÙØ±Ù‘Ù Ù…ÙØ§ Ø¨ÙØ¹Ù’Ø¯ÙÙ‡ÙØŒ Ø±ÙØ¨Ù‘Ù Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙ Ù…ÙÙ†Ù Ø§Ù„Ù’ÙƒÙØ³ÙÙ„Ù ÙˆÙØ³ÙÙˆØ¡Ù Ø§Ù„Ù’ÙƒÙØ¨ÙØ±ÙØŒ Ø±ÙØ¨Ù‘Ù Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙ Ù…ÙÙ†Ù’ Ø¹ÙØ°ÙØ§Ø¨Ù ÙÙÙŠ Ø§Ù„Ù†Ù‘ÙØ§Ø±Ù ÙˆÙØ¹ÙØ°ÙØ§Ø¨Ù ÙÙÙŠ Ø§Ù„Ù’Ù‚ÙØ¨Ù’Ø±Ù.", c: 1},
                {t: "Ø§Ù„Ù„Ù‘ÙÙ‡ÙÙ…Ù‘Ù Ù…ÙØ§ Ø£ÙØµÙ’Ø¨ÙØ­Ù Ø¨ÙÙŠ Ù…ÙÙ†Ù’ Ù†ÙØ¹Ù’Ù…ÙØ©Ù Ø£ÙÙˆÙ’ Ø¨ÙØ£ÙØ­ÙØ¯Ù Ù…ÙÙ†Ù’ Ø®ÙÙ„Ù’Ù‚ÙÙƒÙ ÙÙÙ…ÙÙ†Ù’ÙƒÙ ÙˆÙØ­Ù’Ø¯ÙÙƒÙ Ù„Ø§Ù Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙƒÙØŒ ÙÙÙ„ÙÙƒÙ Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù ÙˆÙÙ„ÙÙƒÙ Ø§Ù„Ø´Ù‘ÙÙƒÙ’Ø±Ù.", c: 1},
                {t: "Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø§Ù„Ù‘ÙØ°ÙÙŠ Ù„ÙØ§ ÙŠÙØ¶ÙØ±Ù‘Ù Ù…ÙØ¹Ù Ø§Ø³Ù’Ù…ÙÙ‡Ù Ø´ÙÙŠÙ’Ø¡ÙŒ ÙÙÙŠ Ø§Ù„Ù’Ø£ÙØ±Ù’Ø¶Ù ÙˆÙÙ„ÙØ§ ÙÙÙŠ Ø§Ù„Ø³Ù‘ÙÙ…ÙØ§Ø¡Ù ÙˆÙÙ‡ÙÙˆÙ Ø§Ù„Ø³Ù‘ÙÙ…ÙÙŠØ¹Ù Ø§Ù„Ù’Ø¹ÙÙ„ÙÙŠÙ…Ù.", c: 3},
                {t: "Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„Ù‡Ù ÙˆÙØ¨ÙØ­ÙÙ…Ù’Ø¯ÙÙ‡Ù", c: 100},
                {t: "Ø§Ù„Ù„Ù‘ÙÙ‡ÙÙ…Ù‘Ù Ø¹Ø§ÙÙ†ÙŠ ÙÙŠ Ø¨Ø¯Ù†ÙŠØŒ Ø§Ù„Ù„Ù‘ÙÙ‡ÙÙ…Ù‘Ù Ø¹Ø§ÙÙ†ÙŠ ÙÙŠ Ø³Ù…Ø¹ÙŠØŒ Ø§Ù„Ù„Ù‘ÙÙ‡ÙÙ…Ù‘Ù Ø¹Ø§ÙÙ†ÙŠ ÙÙŠ Ø¨ØµØ±ÙŠØŒ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø£Ù†Øª.", c: 3}
            ],
            "Ø§Ù„Ù…Ø³Ø§Ø¡": [
                {t: "Ø£ÙÙ…Ù’Ø³ÙÙŠÙ’Ù†ÙØ§ ÙˆÙØ£ÙÙ…Ù’Ø³ÙÙ‰ Ø§Ù„Ù’Ù…ÙÙ„Ù’ÙƒÙ Ù„ÙÙ„Ù‘ÙÙ‡ÙØŒ ÙˆÙØ§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„Ù‘ÙÙ‡Ù Ù„Ø§Ù Ø¥ÙÙ„Ù‡Ù Ø¥ÙÙ„Ø§Ù‘Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù ÙˆÙØ­Ù’Ø¯ÙÙ‡Ù Ù„Ø§Ù Ø´ÙØ±ÙÙŠÙƒÙ Ù„ÙÙ‡Ù... (ÙˆÙŠÙƒÙ…Ù„ Ù…Ø«Ù„ Ø¯Ø¹Ø§Ø¡ Ø§Ù„ØµØ¨Ø§Ø­)", c: 1},
                {t: "Ø§Ù„Ù„Ù‘ÙÙ‡ÙÙ…Ù‘Ù Ø¨ÙÙƒÙ Ø£ÙÙ…Ù’Ø³ÙÙŠÙ’Ù†ÙØ§ ÙˆÙØ¨ÙÙƒÙ Ø£ÙØµÙ’Ø¨ÙØ­Ù’Ù†ÙØ§ ÙˆÙØ¨ÙÙƒÙ Ù†ÙØ­Ù’ÙŠÙØ§ ÙˆÙØ¨ÙÙƒÙ Ù†ÙÙ…ÙÙˆØªÙ ÙˆÙØ¥ÙÙ„ÙÙŠÙ’ÙƒÙ Ø§Ù„Ù’Ù…ÙØµÙÙŠØ±Ù.", c: 1},
                {t: "Ø£ÙØ¹ÙÙˆØ°Ù Ø¨ÙÙƒÙÙ„ÙÙ…ÙØ§ØªÙ Ø§Ù„Ù„Ù‘ÙÙ‡Ù Ø§Ù„ØªÙ‘ÙØ§Ù…Ù‘ÙØ§ØªÙ Ù…ÙÙ†Ù’ Ø´ÙØ±Ù‘Ù Ù…ÙØ§ Ø®ÙÙ„ÙÙ‚Ù", c: 3},
                {t: "Ø³ÙŠØ¯ Ø§Ù„Ø§Ø³ØªØºÙØ§Ø±: Ø§Ù„Ù„Ù‘ÙÙ‡ÙÙ…Ù‘Ù Ø£ÙÙ†Ù’ØªÙ Ø±ÙØ¨Ù‘ÙÙŠ Ù„ÙØ§ Ø¥ÙÙ„ÙÙ‡Ù Ø¥ÙÙ„Ù‘ÙØ§ Ø£ÙÙ†Ù’ØªÙ Ø®ÙÙ„ÙÙ‚Ù’ØªÙÙ†ÙÙŠ ÙˆÙØ£ÙÙ†ÙØ§ Ø¹ÙØ¨Ù’Ø¯ÙÙƒÙ...", c: 1}
            ],
            "Ø§Ù„ØµÙ„Ø§Ø©": [
                {t: "Ø£ÙØ³Ù’ØªÙØºÙ’ÙÙØ±Ù Ø§Ù„Ù„Ù‘ÙÙ‡Ù (Ø«ÙÙ„Ø§ÙØ«Ø§Ù‹). Ø§Ù„Ù„Ù‘ÙÙ‡ÙÙ…Ù‘Ù Ø£ÙÙ†Ù’ØªÙ Ø§Ù„Ø³Ù‘ÙÙ„Ø§ÙÙ…ÙØŒ ÙˆÙÙ…ÙÙ†Ù’ÙƒÙ Ø§Ù„Ø³Ù‘ÙÙ„Ø§ÙÙ…ÙØŒ ØªÙØ¨ÙØ§Ø±ÙÙƒÙ’ØªÙ ÙŠÙØ§ Ø°ÙØ§ Ø§Ù„Ù’Ø¬ÙÙ„Ø§ÙÙ„Ù ÙˆÙØ§Ù„Ø¥ÙÙƒÙ’Ø±ÙØ§Ù…Ù.", c: 1},
                {t: "Ø§Ù„Ù„Ù‡Ù… Ø£ÙØ¹ÙÙ†Ù‘ÙÙŠ Ø¹Ù„Ù‰ Ø°ÙÙƒÙ’Ø±ÙÙƒÙØŒ ÙˆØ´ÙÙƒÙ’Ø±ÙÙƒÙØŒ ÙˆØ­ÙØ³Ù’Ù†Ù Ø¹Ø¨Ø§Ø¯ØªÙƒ. ", c: 1},
                {t: "Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ (33)ØŒ Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡ (33)ØŒ Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø± (33)ØŒ ÙˆØªÙ…Ø§Ù… Ø§Ù„Ù…Ø¦Ø©: Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ù‡... ", c: 33}
            ],
            "Ø§Ù„Ù†ÙˆÙ…": [
                {t: "Ø¨ÙØ§Ø³Ù’Ù…ÙÙƒÙ Ø±ÙØ¨Ù‘ÙÙŠ ÙˆÙØ¶ÙØ¹Ù’ØªÙ Ø¬ÙÙ†Ù’Ø¨ÙÙŠ ÙˆÙØ¨ÙÙƒÙ Ø£ÙØ±Ù’ÙÙØ¹ÙÙ‡ÙØŒ Ø¥ÙÙ†Ù’ Ø£ÙÙ…Ù’Ø³ÙÙƒÙ’ØªÙ Ù†ÙÙÙ’Ø³ÙÙŠ ÙÙØ§Ø±Ù’Ø­ÙÙ…Ù’Ù‡ÙØ§ØŒ ÙˆÙØ¥ÙÙ†Ù’ Ø£ÙØ±Ù’Ø³ÙÙ„Ù’ØªÙÙ‡ÙØ§ ÙÙØ§Ø­Ù’ÙÙØ¸Ù’Ù‡ÙØ§ Ø¨ÙÙ…ÙØ§ ØªÙØ­Ù’ÙÙØ¸Ù Ø¨ÙÙ‡Ù Ø¹ÙØ¨ÙØ§Ø¯ÙÙƒÙ Ø§Ù„ØµÙ‘ÙØ§Ù„ÙØ­ÙÙŠÙ†Ù.", c: 1},
                {t: "ÙŠØ¬Ù…Ø¹ ÙƒÙÙŠÙ‡ Ø«Ù… ÙŠÙ†ÙØ« ÙÙŠÙ‡Ù…Ø§ ÙˆÙŠÙ‚Ø±Ø£: Ù‚Ù„ Ù‡Ùˆ Ø§Ù„Ù„Ù‡ Ø£Ø­Ø¯ØŒ ÙˆÙ‚Ù„ Ø£Ø¹ÙˆØ° Ø¨Ø±Ø¨ Ø§Ù„ÙÙ„Ù‚ØŒ ÙˆÙ‚Ù„ Ø£Ø¹ÙˆØ° Ø¨Ø±Ø¨ Ø§Ù„Ù†Ø§Ø³ (3 Ù…Ø±Ø§Øª).", c: 3},
                {t: "Ø§Ù„Ù„Ù‘ÙÙ‡ÙÙ…Ù‘Ù Ø£ÙØ³Ù’Ù„ÙÙ…Ù’ØªÙ Ù†ÙÙÙ’Ø³ÙÙŠ Ø¥ÙÙ„ÙÙŠÙ’ÙƒÙØŒ ÙˆÙÙÙÙˆÙ‘ÙØ¶Ù’ØªÙ Ø£ÙÙ…Ù’Ø±ÙÙŠ Ø¥ÙÙ„ÙÙŠÙ’ÙƒÙØŒ ÙˆÙØ£ÙÙ„Ù’Ø¬ÙØ£Ù’ØªÙ Ø¸ÙÙ‡Ù’Ø±ÙÙŠ Ø¥ÙÙ„ÙÙŠÙ’ÙƒÙ...", c: 1}
            ],
            "Ø§Ù„Ù…Ø³Ø¬Ø¯": [
                {t: "Ø¥Ø°Ø§ Ø¯Ø®Ù„ Ø£Ø­Ø¯ÙƒÙ… Ø§Ù„Ù…Ø³Ø¬Ø¯ ÙÙ„ÙŠÙ‚Ù„: Ø§Ù„Ù„Ù‡Ù… Ø§ÙØªØ­ Ù„ÙŠ Ø£Ø¨ÙˆØ§Ø¨ Ø±Ø­Ù…ØªÙƒ.", c: "Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„"},
                {t: "Ø¥Ø°Ø§ Ø®Ø±Ø¬ ÙÙ„ÙŠÙ‚Ù„: Ø§Ù„Ù„Ù‡Ù… Ø¥Ù†ÙŠ Ø£Ø³Ø£Ù„Ùƒ Ù…Ù† ÙØ¶Ù„Ùƒ.", c: "Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø±ÙˆØ¬"}
            ]
        };

        function loadAdhkarData() {
            const tabs = document.getElementById('adhkarTabs');
            const list = document.getElementById('adhkarList');
            tabs.innerHTML = '';
            
            Object.keys(adhkarData).forEach((key, index) => {
                const btn = document.createElement('button');
                btn.innerText = `Ø£Ø°ÙƒØ§Ø± ${key}`;
                if(index === 0) btn.classList.add('active');
                btn.onclick = () => {
                    document.querySelectorAll('.adhkar-tabs button').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    renderAdhkarList(key);
                };
                tabs.appendChild(btn);
            });
            renderAdhkarList("Ø§Ù„ØµØ¨Ø§Ø­");
        }

        function renderAdhkarList(category) {
            const list = document.getElementById('adhkarList');
            list.innerHTML = '';
            adhkarData[category].forEach(d => {
                list.innerHTML += `
                    <div class="adhkar-item">
                        <div class="adhkar-text">${d.t}</div>
                        <div class="adhkar-meta"><span>Ø§Ù„ØªÙƒØ±Ø§Ø±: ${d.c}</span> <i class="fas fa-check-circle"></i></div>
                    </div>
                `;
            });
        }

        // --- 4. Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ« (API) ---
        async function fetchHadiths() {
            const container = document.getElementById('hadithList');
            try {
                const res = await fetch('https://cdn.jsdelivr.net/gh/fawazahmed0/hadith-api@1/editions/ara-nawawi.min.json');
                const data = await res.json();
                
                let html = '';
                data.hadiths.forEach(h => {
                    html += `
                        <div class="hadith-card">
                            <h4 style="color:var(--main-gold); margin-bottom:10px;">Ø­Ø¯ÙŠØ« Ø±Ù‚Ù… ${h.hadithnumber}</h4>
                            <p style="font-size:1.1rem; line-height:1.7;">${h.text}</p>
                        </div>
                    `;
                });
                container.innerHTML = html;
            } catch(e) {
                container.innerHTML = 'ÙØ´Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø­Ø§Ø¯ÙŠØ«. (Ù‚Ø¯ ØªÙƒÙˆÙ† ØºÙŠØ± Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª)';
            }
        }

        // --- 5. Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª ---
        function getPrayerTimes() {
            if(navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(async p => {
                    try {
                        const res = await fetch(`https://api.aladhan.com/v1/timings/${Math.floor(Date.now()/1000)}?latitude=${p.coords.latitude}&longitude=${p.coords.longitude}&method=5`);
                        const d = await res.json();
                        const t = d.data.timings;
                        const map = {Fajr:'Ø§Ù„ÙØ¬Ø±',Dhuhr:'Ø§Ù„Ø¸Ù‡Ø±',Asr:'Ø§Ù„Ø¹ØµØ±',Maghrib:'Ø§Ù„Ù…ØºØ±Ø¨',Isha:'Ø§Ù„Ø¹Ø´Ø§Ø¡'};
                        let h = '<div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap:10px;">';
                        for(let k in map) {
                            h += `<div style="background:#333; padding:15px; border-radius:10px; border-bottom:3px solid var(--main-gold);">
                                <div style="color:var(--main-gold); font-weight:bold;">${map[k]}</div>
                                <div style="font-size:1.2rem; margin-top:5px;">${t[k]}</div>
                            </div>`;
                        }
                        h += '</div>';
                        document.getElementById('prayer-display').innerHTML = h;
                    } catch(e) { document.getElementById('prayer-display').innerText = 'Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª. (Ù‚Ø¯ ØªÙƒÙˆÙ† ØºÙŠØ± Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª)'; }
                }, () => document.getElementById('prayer-display').innerText = 'ÙŠØ±Ø¬Ù‰ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ (GPS) Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª');
            }
        }

        // --- 6. Ø§Ù„Ø³Ø¨Ø­Ø© ---
        let count = 0;
        function countTasbeeh() {
            count++;
            document.getElementById('tasbeehCounter').innerText = count;
            if(navigator.vibrate) navigator.vibrate(30);
        }
        function resetTasbeeh() { count = 0; document.getElementById('tasbeehCounter').innerText = 0; }

    </script>
</body>
</html>
